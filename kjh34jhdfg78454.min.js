/*! ChromebookRedirector 2023-07-20 */

"use strict";

var e = false;
function n(e) {
  e = e.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
  var n = new RegExp("[\\?&]" + e + "=([^&#]*)").exec(window.location.href);
  if (n == null) {
    return "";
  } else {
    return n[1];
  }
}
function t(e) {
  return decodeURIComponent(e.replace(/\+/g, " "));
}
function d() {
  if (n("re") == "1") {
    document.getElementById("exception1").innerHTML = "Request An Exception";
    document.getElementById("exception2").innerHTML = "Reason:";
    document.getElementById("exception3").innerHTML = "<textarea id=\"rem2\" name=\"rem2\" rows=\"3\" cols=\"40\"></textarea>";
    document.getElementById("exception4").innerHTML = "<a href=\"#\" class=\"submit-btn\">Request Exception</a>";
    document.getElementById("exception5").innerHTML = "Email:";
    document.getElementById("exception6").innerHTML = "<input type=\"text\" id=\"rem3\" name=\"rem3\">";
    document.getElementById("exception4").addEventListener("click", m);
  } else {
    document.getElementById("exception").className = "hidden";
  }
  document.getElementById("url").innerHTML = "<a href=\"" + t(n("bu")) + "\">" + t(n("bu")) + "</a>";
  if (n("bc") != "") {
    document.getElementById("description").innerHTML = t(n("bc"));
  } else {
    document.getElementById("hide_description").className = "hidden";
  }
  if (n("fn") != "") {
    document.getElementById("groupNumber").innerHTML = t(n("fn"));
  } else {
    document.getElementById("hide_groupNumber").className = "hidden";
  }
  if (n("fp") != "") {
    document.getElementById("groupName").innerHTML = t(n("fp"));
  } else {
    document.getElementById("hide_groupName").className = "hidden";
  }
  if (n("ip") != "") {
    document.getElementById("ipAddress").innerHTML = t(n("ip"));
  } else {
    document.getElementById("hide_ipAddress").className = "hidden";
  }
  if (n("ip") != "") {
    document.getElementById("clia").innerHTML = "Currently logged into IP Address: " + t(n("ip"));
  } else {
    document.getElementById("clia").className = "hidden";
  }
  if (n("ct") != "") {
    document.getElementById("customText").innerHTML = t(n("ct"));
  } else {
    document.getElementById("customText").className = "hidden";
  }
  if (n("ce") != undefined) {
    document.getElementById("rem3").value = t(n("ce"));
  }
}
function m() {
  if (e != 1) {
    e = true;
    var d = {
      type: "EXCEPTION_REQUEST"
    };
    d.url = t(n("bu"));
    d.email = document.getElementById("rem3").value;
    d.reason = document.getElementById("rem2").value;
    chrome.runtime.sendMessage(d, function (n) {
      if (n === true) {
        document.getElementById("exception").className = "hidden";
        alert("Exception Request sent successfully");
      } else {
        alert(n);
      }
      e = false;
    });
  }
}
window.addEventListener("load", d);
